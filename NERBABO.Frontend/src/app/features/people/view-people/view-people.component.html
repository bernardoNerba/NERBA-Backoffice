@if (person$ | async; as person){
<app-title
  [title]="person.fullName"
  [isDropdown]="true"
  [menuItems]="menuItems"
/>

<div class="card w-100 hv-100 mt-2">
  <div class="card-header">
    <app-nav-header [person]="person" [activePage]="'person'" />
  </div>
  <div class="card-body">
    <div class="container-fluid px-0 my-4">
      <div class="accordion" id="general-info-accordion">
        <!-- GENERAL INFO ACCORDION-->
        <div class="accordion-item">
          <h2 class="accordion-header" id="heading-general-info">
            <button
              class="accordion-button fw-bold collapsed"
              type="button"
              data-bs-toggle="collapse"
              data-bs-target="#general-info-content"
              aria-expanded="false"
              aria-controls="general-info-content"
            >
              <i class="bi bi-person-bounding-box fs-4 me-3"></i>
              <h5>Informações Gerais</h5>
            </button>
          </h2>
          <div
            id="general-info-content"
            class="accordion-collapse collapse"
            aria-labelledby="heading-general-info"
          >
            <div class="accordion-body">
              <div class="container-fluid px-0">
                <div class="row row-cols-1 row-cols-sm-2 row-cols-md-3 g-3">
                  <div class="col">
                    <div class="property">
                      <div class="bg-green-white fw-bold">Nome</div>
                      <p class="text-break mb-0">
                        {{ person.fullName || "N/A" }}
                      </p>
                    </div>
                  </div>
                  <div class="col">
                    <div class="property">
                      <div class="bg-green-white fw-bold">Genero</div>
                      <p class="text-break mb-0">
                        {{ person.gender || "N/A" }}
                      </p>
                    </div>
                  </div>
                  <div class="col">
                    <div class="property">
                      <div class="bg-green-white fw-bold">
                        Data de Nascimento
                      </div>
                      <p class="text-break mb-0">
                        {{ (person.birthDate | date : "dd/MM/yyyy") || "N/A" }}
                      </p>
                    </div>
                  </div>
                  <div class="col">
                    <div class="property">
                      <div class="bg-green-white fw-bold">Nacionalidade</div>
                      <p class="text-break mb-0">
                        {{ person.nationality || "N/A" }}
                      </p>
                    </div>
                  </div>
                  <div class="col">
                    <div class="property">
                      <div class="bg-green-white fw-bold">Naturalidade</div>
                      <p class="text-break mb-0">
                        {{ person.naturality || "N/A" }}
                      </p>
                    </div>
                  </div>
                  <div class="col">
                    <div class="property">
                      <div class="bg-green-white fw-bold">Habilitações</div>
                      <p class="text-break mb-0">
                        {{ person.habilitation || "N/A" }}
                      </p>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <!-- END GENERAL INFO ACCORDION -->

        <!-- CONTACT INFO ACCORDION -->
        <div class="accordion-item">
          <h2 class="accordion-header" id="heading-contact-info">
            <button
              class="accordion-button fw-bold collapsed"
              type="button"
              data-bs-toggle="collapse"
              data-bs-target="#contact-info-content"
              aria-expanded="true"
              aria-controls="contact-info-content"
            >
              <i class="bi bi-person-lines-fill fs-4 me-3"></i>
              <h5>Contactos da Pessoa</h5>
            </button>
          </h2>
          <div
            id="contact-info-content"
            class="accordion-collapse collapse"
            aria-labelledby="heading-contact-info"
          >
            <div class="accordion-body">
              <div class="container-fluid px-0">
                <div class="row row-cols-1 row-cols-sm-2 row-cols-md-3 g-3">
                  <div class="col">
                    <div class="property">
                      <div class="bg-green-white fw-bold">Email</div>
                      <p class="text-break mb-0">{{ person.email || "N/A" }}</p>
                    </div>
                  </div>
                  <div class="col">
                    <div class="property">
                      <div class="bg-green-white fw-bold">Tel.</div>
                      <p class="text-break mb-0">
                        {{ person.phoneNumber || "N/A" }}
                      </p>
                    </div>
                  </div>
                  <div class="col">
                    <div class="property">
                      <div class="bg-green-white fw-bold">Código-Postal</div>
                      <p class="text-break mb-0">
                        {{ person.zipCode || "N/A" }}
                      </p>
                    </div>
                  </div>
                  <div class="col">
                    <div class="property">
                      <div class="bg-green-white fw-bold">Morada</div>
                      <p class="text-break mb-0">
                        {{ person.address || "N/A" }}
                      </p>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <!-- END CONTACT INFO ACCORDION -->

        <!-- IDENTIFICATION INFO ACCORDION -->
        <div class="accordion-item">
          <h2 class="accordion-header" id="heading-identification-info">
            <button
              class="accordion-button fw-bold collapsed"
              type="button"
              data-bs-toggle="collapse"
              data-bs-target="#identification-info-content"
              aria-expanded="true"
              aria-controls="identification-info-content"
            >
              <i class="bi bi-info-circle-fill fs-4 me-3"></i>
              <h5>Identificação da Pessoa</h5>
            </button>
          </h2>
          <div
            id="identification-info-content"
            class="accordion-collapse collapse"
            aria-labelledby="heading-identification-info"
          >
            <div class="accordion-body">
              <div class="container-fluid px-0">
                <div class="row row-cols-1 row-cols-sm-2 row-cols-md-3 g-3">
                  <div class="col">
                    <div class="property">
                      <div class="bg-green-white fw-bold">NIF</div>
                      <p class="text-break mb-0">{{ person.nif || "N/A" }}</p>
                    </div>
                  </div>
                  <div class="col">
                    <div class="property">
                      <div class="bg-green-white fw-bold">NISS</div>
                      <p class="text-break mb-0">{{ person.niss || "N/A" }}</p>
                    </div>
                  </div>
                  <div class="col">
                    <div class="property">
                      <div class="bg-green-white fw-bold">nº identificação</div>
                      <p class="text-break mb-0">
                        {{ person.identificationNumber || "N/A" }}
                      </p>
                    </div>
                  </div>
                  <div class="col">
                    <div class="property">
                      <div class="bg-green-white fw-bold">Tipo de identificação</div>
                      <p class="text-break mb-0">
                        {{ person.identificationType || "N/A" }}
                      </p>
                    </div>
                  </div>
                  <div class="col">
                    <div class="property">
                      <div class="bg-green-white fw-bold">Validade da identificação</div>
                      <p class="text-break mb-0">
                        {{
                          (person.identificationValidationDate
                            | date : "dd/MM/yyyy") || "N/A"
                        }}
                      </p>
                    </div>
                  </div>

                  <div class="col">
                    <div class="property">
                      <div class="bg-green-white fw-bold">IBAN</div>
                      <p class="text-break mb-0">
                        {{ person.iban || "N/A" }}
                      </p>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <!-- END IDENTIFICATION INFO ACCORDION -->

        <!-- DOCUMENTATION ACCORDION -->
        <div class="accordion-item">
          <h2 class="accordion-header" id="heading-documentation">
            <button
              class="accordion-button fw-bold collapsed"
              type="button"
              data-bs-toggle="collapse"
              data-bs-target="#documentation-content"
              aria-expanded="true"
              aria-controls="documentation-content"
            >
              <i class="bi bi-filetype-doc fs-4 me-3"></i>
              <h5>Documentação Armazenada</h5>
            </button>
          </h2>
          <div
            id="documentation-content"
            class="accordion-collapse collapse"
            aria-labelledby="heading-documentation"
          >
            <div class="accordion-body">
              <div class="container-fluid px-0">
                <!-- Habilitation PDF Manager -->
                <app-pdf-file-manager
                  [config]="habilitationPdfConfig"
                  [pdfId]="person.habilitationComprovativePdfId"
                  [personName]="person.fullName"
                  [isUploading]="isUploadingHabilitation"
                  (fileSelected)="onHabilitationFileSelected($event)"
                  (uploadClick)="uploadHabilitationPdf()"
                  (downloadClick)="downloadHabilitationPdf()"
                  (viewClick)="viewHabilitationPdf()"
                  (deleteClick)="deleteHabilitationPdf()"
                />

                <hr />

                <!-- NIF PDF Manager -->
                <app-pdf-file-manager
                  [config]="nifPdfConfig"
                  [pdfId]="person.ibanComprovativePdfId"
                  [personName]="person.fullName"
                  [isUploading]="isUploadingNif"
                  (fileSelected)="onNifFileSelected($event)"
                  (uploadClick)="uploadNifPdf()"
                  (downloadClick)="downloadNifPdf()"
                  (viewClick)="viewNifPdf()"
                  (deleteClick)="deleteNifPdf()"
                />

                <hr />

                <!-- Identification Document PDF Manager -->
                <app-pdf-file-manager
                  [config]="identificationDocumentPdfConfig"
                  [pdfId]="person.identificationDocumentPdfId"
                  [personName]="person.fullName"
                  [isUploading]="isUploadingIdentification"
                  (fileSelected)="onIdentificationDocumentFileSelected($event)"
                  (uploadClick)="uploadIdentificationDocumentPdf()"
                  (downloadClick)="downloadIdentificationDocumentPdf()"
                  (viewClick)="viewIdentificationDocumentPdf()"
                  (deleteClick)="deleteIdentificationDocumentPdf()"
                />
              </div>
            </div>
          </div>
        </div>
        <!-- END DOCUMENTATION ACCORDION -->
      </div>
    </div>
  </div>
</div>

}
